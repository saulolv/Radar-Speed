<svg xmlns="http://www.w3.org/2000/svg" width="800" height="400">
  <defs>
    <marker id="arrow" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto" markerUnits="strokeWidth">
      <path d="M0,0 L0,6 L9,3 z" fill="#000" />
    </marker>
  </defs>

  <rect width="100%" height="100%" fill="white" />

  <!-- Traffic Sim -->
  <rect x="50" y="150" width="120" height="60" rx="5" ry="5" fill="#e1f5fe" stroke="black" />
  <text x="110" y="180" font-family="Arial" font-size="14" text-anchor="middle">Traffic Sim</text>
  <text x="110" y="195" font-family="Arial" font-size="10" text-anchor="middle">(src/traffic_sim.c)</text>

  <!-- Arrow to Sensor -->
  <line x1="170" y1="180" x2="230" y2="180" stroke="black" stroke-width="2" marker-end="url(#arrow)" />

  <!-- Sensor Thread -->
  <rect x="230" y="150" width="120" height="60" rx="5" ry="5" fill="#e1f5fe" stroke="black" />
  <text x="290" y="180" font-family="Arial" font-size="14" text-anchor="middle">Sensor Thread</text>
  <text x="290" y="195" font-family="Arial" font-size="10" text-anchor="middle">(src/sensor_thread.c)</text>

  <!-- Arrow to Main -->
  <line x1="350" y1="180" x2="410" y2="180" stroke="black" stroke-width="2" marker-end="url(#arrow)" />
  <text x="380" y="170" font-family="Arial" font-size="10" text-anchor="middle">MsgQ</text>

  <!-- Main Control -->
  <rect x="410" y="150" width="140" height="60" rx="5" ry="5" fill="#fff9c4" stroke="black" />
  <text x="480" y="180" font-family="Arial" font-size="14" text-anchor="middle">Main Control</text>
  <text x="480" y="195" font-family="Arial" font-size="10" text-anchor="middle">(src/main.c)</text>

  <!-- Arrow to Display -->
  <line x1="550" y1="180" x2="610" y2="180" stroke="black" stroke-width="2" marker-end="url(#arrow)" />
  <text x="580" y="170" font-family="Arial" font-size="10" text-anchor="middle">MsgQ</text>

  <!-- Display Thread -->
  <rect x="610" y="150" width="120" height="60" rx="5" ry="5" fill="#e1f5fe" stroke="black" />
  <text x="670" y="180" font-family="Arial" font-size="14" text-anchor="middle">Display Thread</text>
  <text x="670" y="195" font-family="Arial" font-size="10" text-anchor="middle">(src/display_thread.c)</text>

  <!-- ZBUS Interaction with Camera -->
  <!-- Trigger Down -->
  <line x1="450" y1="210" x2="450" y2="270" stroke="black" stroke-width="2" marker-end="url(#arrow)" />
  <text x="440" y="245" font-family="Arial" font-size="10" text-anchor="end">Trigger</text>

  <!-- Result Up -->
  <line x1="510" y1="270" x2="510" y2="210" stroke="black" stroke-width="2" marker-end="url(#arrow)" />
  <text x="520" y="245" font-family="Arial" font-size="10" text-anchor="start">Result</text>

  <!-- Camera Service -->
  <rect x="410" y="270" width="140" height="60" rx="5" ry="5" fill="#f8bbd0" stroke="black" />
  <text x="480" y="300" font-family="Arial" font-size="14" text-anchor="middle">Camera Service</text>
  <text x="480" y="315" font-family="Arial" font-size="10" text-anchor="middle">(camera_service/)</text>

  <!-- Infraction Log -->
  <rect x="410" y="50" width="140" height="40" rx="5" ry="5" fill="#dcedc8" stroke="black" />
  <text x="480" y="75" font-family="Arial" font-size="14" text-anchor="middle">Infraction Log</text>

  <!-- Line to Infraction Log -->
  <line x1="480" y1="150" x2="480" y2="90" stroke="black" stroke-width="2" marker-end="url(#arrow)" />

</svg>